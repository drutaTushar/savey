<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Savey</title>
  <link rel="manifest" href="manifest.json" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body>
  <h1>Savey</h1>
  <form id="bookmark-form">
    <input type="url" id="url" placeholder="https://example.com" required />
    <input type="text" id="title" placeholder="Title" />
    <button type="submit">Save</button>
  </form>
    <script type="module">
      import { createClient } from 'https://esm.sh/@supabase/supabase-js@2';
      import { SUPABASE_URL, SUPABASE_ANON_KEY } from './config.js';

      const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

      const form = document.getElementById('bookmark-form');
      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        const url = document.getElementById('url').value;
        const title = document.getElementById('title').value;
        const { error } = await supabase.from('bookmarks').insert({ url, title });
        if (error) {
          alert('Error saving bookmark: ' + error.message);
        } else {
          form.reset();
          alert('Saved!');
        }
      });

      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/sw.js', { type: 'module' });
      }
    </script>
  </body>
</html>
